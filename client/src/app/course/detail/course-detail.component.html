<navbar></navbar>
<div *ngIf="loadedStatus && loadedCourse">

<div class="jumbotron jumbotron-fluid">
  <div class="container">
    <h1 class="display-3">{{course.name}}</h1>
    <p class="lead">{{course.description}}</p>
    <hr class="my-4">

    <ng-template #t let-fill="fill">
  <span class="star" [class.full]="fill === 100">
    <span class="half" [style.width.%]="fill">&hearts;</span>&hearts;
  </span>
    </ng-template>
    <ngb-rating [(rate)]="course.rating" [starTemplate]="t" [readonly]="true" max="5"></ngb-rating>

    <p class="card-text">Price: {{course.price}}</p>
    <p class="card-text">Publisher: {{course.publisher.surname}}, {{course.publisher.name}}</p>

    <!--INSCRIBIRSE A CURSO LOCAL-->
    <div *ngIf="isLocal">
      <div *ngIf="isEnrolled">
        <button type="button" (click)="unenroll();" class="btn mt-2 btn-danger">Unenroll</button>
      </div>

      <div *ngIf="!isEnrolled">
        <button type="button" (click)="enroll();" class="btn mt-2 btn-success">Enroll</button>
      </div>
    </div>

    <!-- HACER FAVORITE UN CURSO EXTERNO-->
    <div *ngIf="!isLocal">
      <div *ngIf="isEnrolled">
        <button type="button" (click)="unenroll();" class="btn mt-2 btn-danger">Unfavorite</button>
      </div>

      <div *ngIf="!isEnrolled">
        <button type="button" (click)="enroll();" class="btn mt-2 btn-success">Tag course</button>
      </div>
    </div>
  </div>
</div>

<div class="container">

  <div *ngIf="!isLocal; then externalCourse else localCourse"></div>

  <!--CURSO LOCAL-->
  <ng-template #localCourse>
    <h1 class="display-5">List of Units:</h1>
    <ul>
      <li *ngFor="let unit of course.units">
        <p>Unit {{unit.number}}: {{unit.name}}</p>
      </li>
    </ul>
    <div *ngIf="isPublisher">
      <button [routerLink]="['/create_unit', course.id]"type="button" class="btn btn-outline-primary">Add unit</button>
    </div>
    <button type="button" (click)="doCourse();" class="btn mt-2 btn-primary">Do course</button>
  </ng-template>

  <!--CURSO EXTERNO-->
  <ng-template #externalCourse>
    <p class="card-text">Source of course: {{course.source}}</p>
    <p class="card-text">Link: <a href="{{course.link}}">{{course.link}}</a></p>
  </ng-template>


  <!--ES EL PUBLISHER-->
  <div *ngIf="isPublisher">
    <button type="button" (click)="editCourse();" class="btn mt-2 btn-outline-warning">Edit course</button>
    <button type="button" (click)="deleteCourse();" class="btn mt-2 btn-outline-danger">Delete course</button>


  </div>

</div>

</div>


